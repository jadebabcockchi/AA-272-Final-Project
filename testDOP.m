
clear; close all; clc;
%user_ecef = [2176877.7800,621906.9814,5942863.6590];
%load("rGPS.mat")
%[14,22,17,19] bad
%[14,3,32,24] good
%[2,3,28,21] also good

user_ecef = lla_to_ecef(40,-30,16);

sats = [-2872.2889996385898, 517.6581305693256, 6302.192278876662; ...
5031.807290204393, -1354.5167835498141, 4570.645542388635; ...
4574.32490699344, -2496.605707005366, 4570.350023410917; ...
3690.982449860253, -3508.0694183059236, 4531.371255625132]; 
sats = sats.*1000;


for i = 1:4
    sat_ecef = sats(i,:);
    los_enu(i,:) = compute_los_enu(user_ecef,sat_ecef);
end

A = los_enu;
DOPs = inv(A'*A);
sqrt(trace(DOPs))